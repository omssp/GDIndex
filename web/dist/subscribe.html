	<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="With help of this newsletter we hope to keep you updated with the happening in the world.">
		<meta name="theme-color" content="#1976d2">
		<meta property="og:image" content="http://epaper.omssp.workers.dev/epaper-logo.png">
		<meta property="og:title" content="Subscribe - ePaper">
		<meta property="og:description" content="With help of this newsletter we hope to keep you updated with the happening in the world.">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="Shortcut Icon" href="/epaper-logo.ico" type="image/x-icon">
		<link rel="Bookmark" href="/epaper-logo.ico">
		<title>Subscribe - ePaper</title>
		<link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:wght@500&display=swap" rel="stylesheet">
		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
		<link href="/~_~_gdindex/resources/css/app.css" rel="stylesheet">
		<style type="text/css" id="vuetify-theme-stylesheet">
			.v-application a {
				color: #1976d2;
			}

			.v-application .primary {
				background-color: #1976d2 !important;
				border-color: #1976d2 !important;
			}

			.v-application .primary--text {
				color: #1976d2 !important;
				caret-color: #1976d2 !important;
			}
		</style>
	</head>

	<body data-gr-c-s-loaded="true" style="overflow: hidden;">
		<div data-app="true" class="v-application v-application--is-ltr theme--light" id="app">
			<div class="v-application--wrap">
				<header class="v-sheet v-sheet--tile theme--dark v-toolbar v-app-bar v-app-bar--fixed primary" data-booted="true" style="height: 64px; margin-top: 0px; transform: translateY(0px); left: 0px; right: 0px;">
					<div class="v-toolbar__content" style="height: 64px;">
						<div class="v-toolbar__title headline pointer mx-4" onclick="window.location = window.origin;"><span class="" style="font-family: monospace">ePaper</span></div>
						<div class="v-toolbar__items">
							<!---->
						</div>
						<div data-v-2a7e2efe="" class="v-toolbar__items"></div>
						<div class="spacer"></div>
						<div class="v-toolbar__items"><a href="https://github.com/omssp/GDIndex" target="_blank" class="text-none v-btn v-btn--flat v-btn--text theme--dark v-size--default"><span
									class="v-btn__content"><i aria-hidden="true"
										class="v-icon notranslate mdi mdi-github-circle theme--dark mx-1"></i>omssp</span></a>
						</div>
					</div>
				</header>
				<main class="v-content" data-booted="true" style="padding: 64px 0px 0px;">
					<div class="v-content__wrap">
						<div data-v-2a7e2efe="" class="container container--fluid" style="font-family: 'Zilla Slab', serif;">
							<div data-v-2a7e2efe="" class="v-portal" style="display: none;"></div>
							<div data-v-2a7e2efe="" role="dialog" class="v-dialog__container">
								<div role="document" class="v-dialog__content" style="z-index: 0;">
									<div class="v-dialog" style="max-width: 500px; display: none;"></div>
								</div>
							</div>
							<!---->

							<div data-v-2a7e2efe="" class="row justify-center">
								<div data-v-2a7e2efe="" class="col-md-8 col-lg-6 col">
									<div data-v-2a7e2efe="" class="mx-auto v-card v-sheet v-sheet--tile theme--light" style="min-height: 400px;" id="subdiv">
										<h1 style="text-align: center;">Subscribe<br /><br /></h1>
										<form class="form-horizontal">
											<div class="form-group">
												<div class="offset-sm-1 col-sm-10">
													<input placeholder="Enter Your First Name" type="text" class="form-control" id="thefname">
												</div>
												<div class="offset-sm-1 col-sm-10">
													<input placeholder="Enter Your Last Name" type="text" class="form-control" id="thelname">
												</div>
												<div class="offset-sm-1 col-sm-10">
													<input placeholder="Enter Your Email" type="email" class="form-control" id="theemail">
												</div>
												<div class="offset-sm-1 col-sm-10">
													<select class="form-control" id="theedition" multiple>
														<option value="" selected disabled>Select Your ePaper Edition
														</option>
													</select>
												</div>
											</div>
											<div class="form-group">
												<div class="offset-sm-2 col-sm-8">
													<button type="button" class="btn btn-primary btn-lg btn-block" id="thesubmit">Subscribe</button>

												</div>
											</div>
											<div class="form-group">
												<div class="offset-sm-1 col-sm-10">
													<button type="button" class="btn btn-danger btn-lg btn-block d-none" id="themsg" disabled>Subscribe</button>

												</div>
											</div>
										</form>
										<div style="width: 100%; max-height: 100%; text-align: center;" id="tutor">
											<img src="/report_not_spam.gif" alt="report_not_spam" style="max-width: 100%; max-height: 85vh;" onclick="this.src = this.src;">
										</div>
										<div style="width: 100%; margin-top: 1em; padding-bottom: 1em; text-align: center;">
											<a href="#unsub" onclick="gotoUnsub(); this.style.display = 'none';" class="danger v-btn v-btn--contained v-size--default" style="color: wheat; background: #F44336; margin: auto; max-width: 15em;">Unubscribe</a>
										</div>
									</div>
									<div data-v-2a7e2efe="" class="mx-auto v-card v-sheet v-sheet--tile theme--light" style="min-height: 400px; display: none;" id="unsubdiv">
										<h1 style="text-align: center;">Unsubscribe<br /><br /></h1>
										<form class="form-horizontal">
											<div class="form-group">
												<div class="offset-sm-1 col-sm-10">
													<input placeholder="Enter Your Email" type="email" class="form-control" id="theunemail">
												</div>
												<div class="offset-sm-1 col-sm-10">
													<select class="form-control" id="theunedition"  multiple>
														<option value="" disabled>Select Your ePaper Edition </option>
													</select>
												</div>
											</div>
											<div class="form-group">
												<div class="offset-sm-2 col-sm-8">
													<button type="button" class="btn btn-primary btn-lg btn-block" id="theunsubmit">Unsubscribe</button>

												</div>
											</div>
											<div class="form-group">
												<div class="offset-sm-1 col-sm-10">
													<button type="button" class="btn btn-danger btn-lg btn-block d-none" id="theunmsg" disabled>Subscribe</button>

												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
				</main>
				<div role="dialog" class="v-dialog__container">
					<div role="document" class="v-dialog__content" style="z-index: 0;">
						<div class="v-dialog v-dialog--persistent" style="max-width: 500px; display: none;"></div>
					</div>
				</div>
				</div>
			</div>
			<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
			<script>
				var recur = window.setInterval(() => {
					$('.headline').removeClass('hidden-sm-and-down mr-3');
					$('#app > div > header > div > div:nth-child(5) > a').removeClass('hidden-sm-and-down');
					$('.mdi-github-circle').addClass('mx-1');
					if (!$('.headline').hasClass('hidden-sm-and-down')) {
						window.clearInterval(recur);
						$('.headline').addClass('mx-4');
						$('.headline > span').attr('style', 'font-family: monospace');
						$('.container').attr('style', "font-family: 'Zilla Slab', serif;");
						checkURLforextras();
					}
					$('#thesubmit').unbind('click').on('click', subbscribeIt);
					$('#theunsubmit').unbind('click').on('click', unsubbscribeIt);
				}, 1000);
			</script>
			<script>
				function subbscribeIt() {

					$('#thesubmit').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')

					let thename = $('#thefname').val() + ' ' + $('#thelname').val()
					let theemail = $('#theemail').val()
					if (!thename || !theemail) {
						$('#thesubmit').removeAttr('disabled').html('Subscribe');
						return;
					}
					let theedition = $('#theedition').val().join(',')
					$.ajax({
						method: "GET",
						url: "/?request=addnewemail&email=" + encodeURIComponent(theemail) + "&name=" + encodeURIComponent(thename) + "&type=" + encodeURIComponent(theedition ? theedition : ''),
						async: true,
						success: function(response) {
							console.log(response)
							$('#themsg').removeClass('d-none btn-danger').addClass('btn-success').html('Subscribed!!<br>You\'ll receive the ePaper daily on your email<br><br>Please do Check Your <big><u>SPAM</u></big> Folder too...<br>Also Please see the tutorial given below')
							$('#thesubmit').addClass('d-none')
							window.setTimeout(() => {
								$('html, body').animate({
									scrollTop: ($('#tutor').offset().top - 74)
								})
								$('#tutor img')[0].src = $('#tutor img')[0].src
							}, 3000)
						},
						error: function(e) {
							console.log(e)
							$('#themsg').removeClass('d-none btn-success').addClass('btn-danger').html(e.responseText);
							setTimeout(() => {
								$('#thesubmit').removeAttr('disabled').html('Subscribe');
								$('#themsg').addClass('d-none').html('')
							}, 4000)
						}
					});
				}

				function unsubbscribeIt() {

					$('#theunsubmit').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')

					let theunemail = $('#theunemail').val()
					if (!theunemail) {
						$('#theunsubmit').removeAttr('disabled').html('Unsubscribe');
						return;
					}
					let theunedition = $('#theunedition').val().join(',')
					$.ajax({
						method: "GET",
						url: "/?request=removeoldemail&email=" + encodeURIComponent(theunemail) + "&type=" + encodeURIComponent(theunedition ? theunedition : ''),
						async: true,
						success: function(response) {
							console.log(response)
							$('#theunmsg').removeClass('d-none btn-danger').addClass('btn-success').html('Unsubscribed<br>You\'ll not receive the ePaper anymore...<br><br>We will miss you <big>:\'(</big>')
							$('#theunsubmit').addClass('d-none')
						},
						error: function(e) {
							console.log(e)
							$('#theunmsg').removeClass('d-none btn-success').addClass('btn-danger').html(e.responseText);
							setTimeout(() => {
								$('#theunsubmit').removeAttr('disabled').html('Unsubscribe');
								$('#theunmsg').addClass('d-none').html('')
							}, 4000)
						}
					});
				}

				function gotoUnsub() {
					$('#subdiv').fadeOut('fast', () => {
						$('#unsubdiv').fadeIn('fast')
						$('#app > div > main > div > div > div.row.justify-center > div > div:nth-child(3)').fadeOut('fast')
					})
				}

				function checkURLforextras() {
					if (location.href.split('#')[1] && location.href.split('#')[1].indexOf('unsub') !== -1) {
						if (location.href.split('#')[1].split('=')[1])
							$('#theunemail').val(decodeURIComponent(location.href.split('#')[1].split('=')[1]))
						gotoUnsub();
						$('a[href="#unsub"]').fadeOut('fast')
					} else {
						$('#subdiv').show()
						$('#unsubdiv').hide()
						$('#app > div > main > div > div > div.row.justify-center > div > div:nth-child(3)').fadeIn('fast')
						$('a[href="#unsub"]').fadeIn('slow')
					}
				}

				function populateSelect() {
					$('#theunsubmit').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')
					$('#thesubmit').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')
					$.ajax({
						method: "GET",
						url: "https://epaper.omssp.workers.dev/?request=gettitles",
						contentType: "application/json",
						async: true,
						success: function(response) {
							console.log(response)
							$.each(response, (i, o) => {
								if (o.edition_type) {
									$('#theedition, #theunedition')
										.append($("<option></option>")
											.attr("value", o.edition_type)
											.text(o.edition_title));
								} else if (o.unique_subscribers) {
									$(`<p style="margin: auto; text-align: center; font-family: 'Zilla Slab';">${o.total_subscriptions} Subs ${o.unique_subscribers} Subr</p><div class="spacer"></div>`).insertAfter('header .spacer')
								}
							});
							$('#thesubmit').removeAttr('disabled').html('Subscribe')
							$('#theunsubmit').removeAttr('disabled').html('Unsubscribe')
						},
						error: function(e) {
							console.log(e)
							$('#theunmsg').removeClass('d-none btn-success').addClass('btn-danger').html("Unable to Fetch Editions")
							$('#themsg').removeClass('d-none btn-success').addClass('btn-danger').html("Unable to Fetch Editions")
							setTimeout(() => {
								window.location.reload()
							}, 10000)
						}
					});
				}
				$(window).on('hashchange', checkURLforextras)
				$(document).ready(() => {
					populateSelect()
				})
			</script>
	</body>

	</html>
