<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="With help of this newsletter we hope to keep you updated with the happening in the world.">
    <meta name="theme-color" content="#1976d2">
    <meta property="og:image" content="http://epaper.omssp.workers.dev/epaper-logo.png">
    <meta property="og:title" content="Subscribe - ePaper">
    <meta property="og:description" content="With help of this newsletter we hope to keep you updated with the happening in the world.">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="Shortcut Icon" href="/epaper-logo.ico" type="image/x-icon">
    <link rel="Bookmark" href="/epaper-logo.ico">
    <title>Subscribe - ePaper</title>
    <link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:wght@500&display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="/~_~_gdindex/resources/css/app.css" rel="stylesheet">
    <style type="text/css" id="vuetify-theme-stylesheet">
        .v-application a {
            color: #1976d2;
        }
        
        .v-application .primary {
            background-color: #1976d2 !important;
            border-color: #1976d2 !important;
        }
        
        .v-application .primary--text {
            color: #1976d2 !important;
            caret-color: #1976d2 !important;
        }
        
        .noselect {
            -webkit-touch-callout: none;
            /* iOS Safari */
            -webkit-user-select: none;
            /* Safari */
            -khtml-user-select: none;
            /* Konqueror HTML */
            -moz-user-select: none;
            /* Old versions of Firefox */
            -ms-user-select: none;
            /* Internet Explorer/Edge */
            user-select: none;
            /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
        }
    </style>
</head>

<body data-gr-c-s-loaded="true" style="overflow: hidden;">
    <div data-app="true" class="v-application v-application--is-ltr theme--light" id="app">
        <div class="v-application--wrap">
            <header class="v-sheet v-sheet--tile theme--dark v-toolbar v-app-bar v-app-bar--fixed primary noselect" data-booted="true" style="height: 64px; margin-top: 0px; transform: translateY(0px); left: 0px; right: 0px;">
                <div class="v-toolbar__content" style="height: 64px;">
                    <div class="v-toolbar__title headline pointer mx-4" id="epaper_title"><span class="" style="font-family: monospace">ePaper</span></div>
                    <div class="v-toolbar__items">
                        <!---->
                    </div>
                    <div data-v-2a7e2efe="" class="v-toolbar__items"></div>
                    <div class="spacer"></div>
                    <div class="v-toolbar__items"><a href="https://github.com/omssp/GDIndex" target="_blank" class="text-none v-btn v-btn--flat v-btn--text theme--dark v-size--default"><span
                                class="v-btn__content"><i aria-hidden="true"
                                    class="v-icon notranslate mdi mdi-github-circle theme--dark mx-1"></i>omssp</span></a>
                    </div>
                </div>
            </header>
            <main class="v-content" data-booted="true" style="padding: 64px 0px 0px;">
                <div class="v-content__wrap">
                    <div data-v-2a7e2efe="" class="container container--fluid" style="font-family: 'Zilla Slab', serif;">
                        <div data-v-2a7e2efe="" class="v-portal" style="display: none;"></div>
                        <div data-v-2a7e2efe="" role="dialog" class="v-dialog__container">
                            <div role="document" class="v-dialog__content" style="z-index: 0;">
                                <div class="v-dialog" style="max-width: 500px; display: none;"></div>
                            </div>
                        </div>
                        <!---->

                        <div data-v-2a7e2efe="" class="row justify-center">
                            <div data-v-2a7e2efe="" class="col-md-8 col-lg-6 col">
                                <div data-v-2a7e2efe="" class="mx-auto v-card v-sheet v-sheet--tile theme--light" style="min-height: 400px;" id="subdiv">
                                    <h1 style="text-align: center;">Subscribe<br /><br /></h1>
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <div class="offset-sm-1 col-sm-10">
                                                <input placeholder="Enter Your Email" type="email" class="form-control" id="theemail">
                                            </div>
                                            <div class="offset-sm-1 col-sm-10 d-none">
                                                <input placeholder="Enter Your First Name" type="text" class="form-control" id="thefname">
                                            </div>
                                            <div class="offset-sm-1 col-sm-10 d-none">
                                                <input placeholder="Enter Your Last Name" type="text" class="form-control" id="thelname">
                                            </div>
                                            <div class="offset-sm-1 col-sm-10 d-none">
                                                <select class="form-control" id="theedition" multiple>
                                                    <optgroup label="Select Your ePaper Edition"></optgroup>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="offset-sm-2 col-sm-8 d-none">
                                                <button type="button" class="btn btn-primary btn-lg btn-block" id="thesubmit">Subscribe</button>
                                            </div>
                                            <div class="offset-sm-2 col-sm-8 d-flex justify-content-center">
                                                <button type="button" class="btn btn-secondary btn-block" id="thenext">NEXT</button>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="offset-sm-1 col-sm-10">
                                                <button type="button" class="btn btn-danger btn-lg btn-block d-none" id="themsg" disabled>Subscribe</button>

                                            </div>
                                        </div>
                                    </div>
                                    <div style="width: 100%; max-height: 100%; text-align: center;" id="tutor">
                                        <img src="/report_not_spam.gif" alt="report_not_spam" style="max-width: 100%; max-height: 85vh;" onclick="this.src = this.src;">
                                    </div>
                                    <div style="width: 100%; margin-top: 1em; padding-bottom: 1em; text-align: center;">
                                        <a href="#unsub" onclick="gotoUnsub(); this.style.display = 'none';" class="danger v-btn v-btn--contained v-size--default" style="color: wheat; background: #F44336; margin: auto; max-width: 15em;">Unubscribe</a>
                                    </div>
                                </div>
                                <div data-v-2a7e2efe="" class="mx-auto v-card v-sheet v-sheet--tile theme--light" style="min-height: 400px; display: none;" id="unsubdiv">
                                    <h1 style="text-align: center;">Unsubscribe<br /><br /></h1>
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <div class="offset-sm-1 col-sm-10">
                                                <input placeholder="Enter Your Email" type="email" class="form-control" id="theunemail">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="offset-sm-2 col-sm-8">
                                                <button type="button" class="btn btn-primary btn-lg btn-block" id="theunsubmit">Unsubscribe</button>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="offset-sm-1 col-sm-10">
                                                <button type="button" class="btn btn-danger btn-lg btn-block d-none" id="theunmsg" disabled>Subscribe</button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </main>
            <div role="dialog" class="v-dialog__container">
                <div role="document" class="v-dialog__content" style="z-index: 0;">
                    <div class="v-dialog v-dialog--persistent" style="max-width: 500px; display: none;"></div>
                </div>
            </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script type="text/javascript">
            /*! jquery.finger - v0.1.6 - 2016-10-05
             * https://github.com/ngryman/jquery.finger
             * Copyright (c) 2016 Nicolas Gryman; Licensed MIT */
            ! function(a) {
                "function" == typeof define && define.amd ? define(["jquery"], a) : a("object" == typeof exports ? require("jquery") : jQuery)
            }(function(a) {
                function b(c) {
                    c.preventDefault(), a.event.remove(u, "click", b)
                }

                function c(a, b) {
                    return (p ? b.originalEvent.touches[0] : b)["page" + a.toUpperCase()]
                }

                function d(c, d, e) {
                    var h = a.Event(d, w);
                    a.event.trigger(h, {
                        originalEvent: c
                    }, c.target), h.isDefaultPrevented() && (~d.indexOf("tap") && !p ? a.event.add(u, "click", b) : c.preventDefault()), e && (a.event.remove(u, s + "." + t, f), a.event.remove(u, r + "." + t, g))
                }

                function e(e) {
                    if (!(e.which > 1)) {
                        var k = e.timeStamp || +new Date;
                        i != k && (i = k, v.x = w.x = c("x", e), v.y = w.y = c("y", e), v.time = k, v.target = e.target, w.orientation = null, w.end = !1, h = !1, j = setTimeout(function() {
                            d(e, "press", !0)
                        }, x.pressDuration), a.event.add(u, s + "." + t, f), a.event.add(u, r + "." + t, g), x.preventDefault && (e.preventDefault(), a.event.add(u, "click", b)))
                    }
                }

                function f(b) {
                    if (w.x = c("x", b), w.y = c("y", b), w.dx = w.x - v.x, w.dy = w.y - v.y, w.adx = Math.abs(w.dx), w.ady = Math.abs(w.dy), h = w.adx > x.motionThreshold || w.ady > x.motionThreshold) {
                        for (clearTimeout(j), w.orientation || (w.adx > w.ady ? (w.orientation = "horizontal", w.direction = w.dx > 0 ? 1 : -1) : (w.orientation = "vertical", w.direction = w.dy > 0 ? 1 : -1)); b.target && b.target !== v.target;) b.target = b.target.parentNode;
                        return b.target !== v.target ? (b.target = v.target, void g.call(this, a.Event(r + "." + t, b))) : void d(b, "drag")
                    }
                }

                function g(a) {
                    var b, c = a.timeStamp || +new Date,
                        e = c - v.time;
                    if (clearTimeout(j), h) a.target = v.target, e < x.flickDuration && d(a, "flick"), w.end = !0, b = "drag";
                    else if (a.target === v.target) {
                        var f = k === a.target && c - l < x.doubleTapInterval;
                        b = f ? "doubletap" : "tap", k = f ? null : v.target, l = c
                    }
                    b && d(a, b, !0)
                }
                var h, i, j, k, l, m = navigator.userAgent,
                    n = /chrome/i.exec(m),
                    o = /android/i.exec(m),
                    p = "ontouchstart" in window && !(n && !o),
                    q = p ? "touchstart" : "mousedown",
                    r = p ? "touchend touchcancel" : "mouseup mouseleave",
                    s = p ? "touchmove" : "mousemove",
                    t = "finger",
                    u = a("html")[0],
                    v = {},
                    w = {},
                    x = a.Finger = {
                        pressDuration: 300,
                        doubleTapInterval: 300,
                        flickDuration: 150,
                        motionThreshold: 5
                    };
                return a.event.add(u, q + "." + t, e), a.each("tap doubletap press drag flick".split(" "), function(b, c) {
                    a.fn[c] = function(a) {
                        return a ? this.on(c, a) : this.trigger(c)
                    }
                }), x
            });
        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
        <script>
            var adminMode = false;
            var recur = window.setInterval(() => {
                $('.headline').removeClass('hidden-sm-and-down mr-3');
                $('#app > div > header > div > div:nth-child(5) > a').removeClass('hidden-sm-and-down');
                $('.mdi-github-circle').addClass('mx-1');
                if (!$('.headline').hasClass('hidden-sm-and-down')) {
                    window.clearInterval(recur);
                    $('.headline').addClass('mx-4');
                    $('.headline > span').attr('style', 'font-family: monospace');
                    $('.container').attr('style', "font-family: 'Zilla Slab', serif;");
                    checkURLforextras();
                    $("#epaper_title").on("tap", () => {
                        window.location = window.origin;
                    })
                    $("#epaper_title").on("press", () => {
                        adminMode = true;
                        $('h1').fadeOut(() => {
                            $('h1').fadeIn();
                        });
                    })
                }
                $('#thesubmit').unbind('click').on('click', (adminMode ? subbscribeIt : whatsappMoney));
                $('#theunsubmit').unbind('click').on('click', () => {
                    unsubbscribeIt(false)
                });
                $('#thenext').unbind('click').on('click', nextButton)
            }, 1000);
        </script>
        <script>
            function nextButton() {
                let theemail = $('#theemail').val()
                if (!theemail) {
                    return;
                }
                $('#thenext').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')
                $('#theemail').attr('disabled', 'true')



                $.ajax({
                    method: "GET",
                    url: "/?request=showmailers&email=" + encodeURIComponent(theemail),
                    async: true,
                    success: function(response) {
                        console.log(response)

                        $('#thefname').parent().removeClass('d-none')
                        $('#thelname').parent().removeClass('d-none')
                        $('#theedition').parent().removeClass('d-none')
                        $('#thesubmit').parent().removeClass('d-none')
                        $('#thenext').parent().removeClass('d-flex').addClass('d-none')

                        if (response.counters) {
                            $(`<p style="margin: auto; text-align: center; font-family: 'Zilla Slab';">${response.counters.total_subscriptions} Subs ${response.counters.unique_subscribers} Subr</p><div class="spacer"></div>`).insertAfter('header .spacer')
                        }

                        if (response.info) { // old subr

                            $('#thefname').val(response.info.name.split(' ')[0])
                            $('#thelname').val(response.info.name.split(' ')[1])

                            $('#theemail').val(response.info.email)

                            $.each(response.list, (i, o) => {

                                if ([response.info].filter(ob => ob[o.edition_type]).length) {
                                    $('#theedition > optgroup')
                                        .append($("<option></option>")
                                            .attr("value", o.edition_type)
                                            .attr('selected', true)
                                            .text(o.edition_title))
                                } else {
                                    $('#theedition > optgroup')
                                        .append($("<option></option>")
                                            .attr("value", o.edition_type)
                                            .text(o.edition_title))
                                }
                            });
                            $('#thesubmit').html("Update");

                            //dynamic update sub button on change of form
                            $("#theedition").on("change", (e) => {
                                if ($(e.target).val().length) {
                                    $('#thesubmit').html("Update");
                                    $('#thesubmit').unbind('click').on('click', (adminMode ? subbscribeIt : whatsappMoney));
                                } else {
                                    $('#thesubmit').html("Unsubscribe");
                                    $('#thesubmit').unbind('click').on('click', () => {
                                        unsubbscribeIt(true)
                                    });
                                }
                            })
                        } else { // new subr
                            $.each(response.list, (i, o) => {
                                $('#theedition > optgroup')
                                    .append($("<option></option>")
                                        .attr("value", o.edition_type)
                                        .text(o.edition_title))
                            });
                            $('#thesubmit').unbind('click').on('click', (adminMode ? subbscribeIt : whatsappMoney));
                        }
                    },
                    error: function(e) {
                        console.log(e)
                        $('#themsg').removeClass('d-none btn-success').addClass('btn-danger').html(e.responseText);
                        setTimeout(() => {
                            $('#thenext').removeAttr('disabled').html('NEXT');
                            $('#themsg').addClass('d-none').html('')
                        }, 4000)
                    }
                });
            }

            function whatsappMoney() {

                $('#thesubmit').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')

                let thename = $('#thefname').val() + ' ' + $('#thelname').val()
                let theemail = $('#theemail').val()
                if (!thename || !theemail || !$('#theedition option:selected').length) {
                    $('#thesubmit').removeAttr('disabled').html('Subscribe');
                    return;
                }
                let costPerSub = 50;
                let finalCost;
                let theedition = "";
                $('#theedition option:selected').each((i, o) => {
                    theedition += `\n${i + 1}: _${o.innerText}_`;
                    finalCost = (i + 1) * costPerSub;
                });

                let message = `Hi \u{1f44b}\n\nMy name is *${thename}*\nMy email is _${theemail}_\n\nPlease add my following ePaper subscription(s) for one month\n${theedition}\n\nAs an appreciation to your work\n*I am happily donating you \u{20b9}${finalCost}*\n\nThanks \u{263a}`;

                let url = `https://wa.me/918793687422?text=${encodeURIComponent(message)}`;

                var link = document.createElement('a');
                link.href = url;
                link.style.display = "none";
                document.body.appendChild(link);
                link.click();
                link.remove();


                $('#themsg').removeClass('d-none btn-danger').addClass('btn-success').html('Your Subscription request is Received<br>You\'ll receive the ePaper daily on your email, <b>once your donation has been verified</b><br><br>Please do Check Your <big><u>SPAM</u></big> Folder too...<br>Please refer to the tutorial given below');
                $('#thesubmit').addClass('d-none');
            }

            function subbscribeIt() {

                $('#thesubmit').attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')

                let thename = $('#thefname').val() + ' ' + $('#thelname').val()
                let theemail = $('#theemail').val()
                if (!thename || !theemail) {
                    $('#thesubmit').removeAttr('disabled').html('Subscribe');
                    return;
                }
                let theedition = $('#theedition').val().join(',')
                $.ajax({
                    method: "GET",
                    url: "/?request=addnewemail&email=" + encodeURIComponent(theemail) + "&name=" + encodeURIComponent(thename) + "&type=" + encodeURIComponent(theedition ? theedition : ''),
                    async: true,
                    success: function(response) {
                        console.log(response)
                        $('#themsg').removeClass('d-none btn-danger').addClass('btn-success').html('Subscribed!!<br>You\'ll receive the ePaper daily on your email<br><br>Please do Check Your <big><u>SPAM</u></big> Folder too...<br>Also Please see the tutorial given below')
                        $('#thesubmit').addClass('d-none')
                        window.setTimeout(() => {
                            $('html, body').animate({
                                scrollTop: ($('#tutor').offset().top - 74)
                            })
                            $('#tutor img')[0].src = $('#tutor img')[0].src
                        }, 3000)
                    },
                    error: function(e) {
                        console.log(e)
                        $('#themsg').removeClass('d-none btn-success').addClass('btn-danger').html(e.responseText);
                        setTimeout(() => {
                            $('#thesubmit').removeAttr('disabled').html('Subscribe');
                            $('#themsg').addClass('d-none').html('')
                        }, 4000)
                    }
                });
            }

            function unsubbscribeIt(notun = false) {

                $(`#the${notun ? '' : 'un'}submit`).attr('disabled', 'true').html('<span class="spinner-border spinner-border-sm"></span>')

                let theunemail = $(`#the${notun ? '' : 'un'}email`).val()
                if (!theunemail) {
                    $(`#the${notun ? '' : 'un'}submit`).removeAttr('disabled').html('Unsubscribe');
                    return;
                }
                $.ajax({
                    method: "GET",
                    url: "/?request=removeoldemail&email=" + encodeURIComponent(theunemail),
                    async: true,
                    success: function(response) {
                        console.log(response)
                        $(`#the${notun ? '' : 'un'}msg`).removeClass('d-none btn-danger').addClass('btn-success').html('Unsubscribed<br>You\'ll not receive the ePaper anymore...<br><br>We will miss you <big>:\'(</big>')
                        $(`#the${notun ? '' : 'un'}submit`).addClass('d-none')
                    },
                    error: function(e) {
                        console.log(e)
                        $(`#the${notun ? '' : 'un'}msg`).removeClass('d-none btn-success').addClass('btn-danger').html(e.responseText);
                        setTimeout(() => {
                            $(`#the${notun ? '' : 'un'}submit`).removeAttr('disabled').html('Unsubscribe');
                            $(`#the${notun ? '' : 'un'}msg`).addClass('d-none').html('')
                        }, 4000)
                    }
                });
            }

            function gotoUnsub() {
                $('#subdiv').fadeOut('fast', () => {
                    $('#unsubdiv').fadeIn('fast')
                    $('#app > div > main > div > div > div.row.justify-center > div > div:nth-child(3)').fadeOut('fast')
                })
            }

            function checkURLforextras() {
                if (location.href.split('#')[1] && location.href.split('#')[1].indexOf('unsub') !== -1) {
                    if (location.href.split('#')[1].split('=')[1])
                        $('#theunemail').val(decodeURIComponent(location.href.split('#')[1].split('=')[1]))
                    gotoUnsub();
                    $('a[href="#unsub"]').fadeOut('fast')
                } else {
                    $('#subdiv').show()
                    $('#unsubdiv').hide()
                    $('#app > div > main > div > div > div.row.justify-center > div > div:nth-child(3)').fadeIn('fast')
                    $('a[href="#unsub"]').fadeIn('slow')
                }
            }
            $(window).on('hashchange', checkURLforextras)
        </script>
</body>

</html>
